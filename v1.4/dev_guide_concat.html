<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>oneDNN: Concat</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script src="assets/mathjax/MathJax.js?config=TeX-AMS_CHTML,dnnl"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
<link href="assets/customdoxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="assets/dnn.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname">oneAPI Deep Neural Network Library (oneDNN)
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
   <div id="projectbrief">Performance library for Deep Learning</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Concat </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><blockquote class="doxtable">
<p></p>
<p><a class="el" href="group__dnnl__api__concat.html">API Reference</a></p>
<p></p>
</blockquote>
<p>The concat primitive concatenates \(N\) tensors over <code>concat_axis</code> (here designated as \(C\) axis) and defined as (the variable names follow the standard <a class="el" href="dev_guide_conventions.html">Naming Conventions</a>):</p>
<p class="formulaDsp">
\[ \dst(\overline{ou}, c, \overline{in}) = \src_i(\overline{ou}, c&#39;, \overline{in}), \]
</p>
<p>where \(c = C_1 + .. + C_{i-1} {}_{} + c&#39;\).</p>
<p>The concat primitive doesn't have a notion of forward or backward propagations. The backward propagation for the concatenation operation is simply an identity operation.</p>
<h2>Execution Arguments</h2>
<p>When executed, the inputs and outputs should be mapped to an execution argument index as specified by the following table. </p>
<table class="doxtable">
<tr>
<th>Primitive input/output </th><th>Execution argument index  </th></tr>
<tr>
<td>\(\src\) </td><td>DNNL_ARG_MULTIPLE_SRC </td></tr>
<tr>
<td>\(\dst\) </td><td>DNNL_ARG_DST </td></tr>
</table>
<h2>Implementation Details</h2>
<h3>General Notes</h3>
<ol type="1">
<li>The \(\dst\) memory format can be either specified by a user or derived by the primitive. The recommended way is to allow the primitive to choose the most appropriate format.</li>
<li>The concat primitive requires all source and destination tensors to have the same shape except for the <code>concat_axis</code>. The destination dimension for the <code>concat_axis</code> must be equal to the sum of the <code>concat_axis</code> dimensions of the sources (i.e. \(C = \sum_i C_i\)). Implicit broadcasting is not supported.</li>
</ol>
<h3>Data Types Support</h3>
<p>The concat primitive supports arbitrary data types for source and destination tensors according to the <a class="el" href="dev_guide_data_types.html">Data Types</a> page. However, it is required that all source tensors are of the same data type (but not necessarily matching the data type of the destination tensor).</p>
<h3>Data Representation</h3>
<p>The concat primitive works with arbitrary data tensors. There is no special meaning associated with any logical dimensions.</p>
<h3>Post-ops and Attributes</h3>
<p>The concat primitive doesn't support any post-ops or attributes.</p>
<h2>Implementation Limitations</h2>
<ol type="1">
<li>The primitive works with several memory formats, such as plain formats <a class="el" href="group__dnnl__api__memory.html#gga395e42b594683adb25ed2d842bb3091da83a751aedeb59613312339d0f8b90f54" title="4D CNN activations tensor, an alias to dnnl_abcd ">dnnl_nchw</a>, <a class="el" href="group__dnnl__api__memory.html#gga395e42b594683adb25ed2d842bb3091dae50c534446b3c18cc018b3946b3cebd7" title="4D CNN activations tensor, an alias to dnnl_acdb ">dnnl_nhwc</a>, and blocked formats <a class="el" href="group__dnnl__api__memory.html#gga395e42b594683adb25ed2d842bb3091daa7847819b4fb840d2db20796bc607a5c" title="4D CNN activations tensor blocked by channels with block size 16, an alias to dnnl_aBcd16b ...">dnnl_nChw16c</a>, <a class="el" href="group__dnnl__api__memory.html#gga395e42b594683adb25ed2d842bb3091dabacffa20b5188cda4d5f86e2e10d2572" title="5D CNN activations tensor blocked by channels with block size 8, an alias to dnnl_aBcde8b ...">dnnl_nCdhw8c</a> that appear in convolutions. The primitive does not support non-blocked formats that are typically used in prepacked weights, such as:<ul>
<li><a class="el" href="dev_guide_convolution.html">Winograd</a> format <a class="el" href="group__dnnl__api__memory.html#ggaa75cad747fa467d9dc527d943ba3367da63f2a3abc24051939054b8a93f413f7a" title="Weights format used in 8bit Winograd convolution. ">dnnl_format_kind_wino</a>,</li>
<li><a class="el" href="dev_guide_rnn.html">RNN</a> format <a class="el" href="group__dnnl__api__memory.html#ggaa75cad747fa467d9dc527d943ba3367dae5b6de34bb827e55ebae58904dd2953b" title="Packed weights format used in RNN. ">dnnl_format_kind_rnn_packed</a>, or</li>
<li>Blocked format with attached <a class="el" href="dev_guide_int8_computations.html#dg_i8_comp_s12">compensation</a> (<a class="el" href="group__dnnl__api__memory.html#gga29a3828f894856ee61f6a11cd4a39dcaaf6124ad1b5544bf291a9499e6293f827" title="Indicates the weights have an additional buffer, that depends on the compensation_mask. ">dnnl_memory_extra_flag_compensation_conv_s8s8</a>), that is used in <code>s8s8</code> convolutions (see <a class="el" href="dev_guide_int8_computations.html">Int8 Computation Aspects</a>).</li>
</ul>
</li>
<li>Refer to <a class="el" href="dev_guide_data_types.html">Data Types</a> for limitations related to data types support.</li>
</ol>
<h2>Performance Tips</h2>
<ol type="1">
<li>Whenever possible, avoid specifying the destination memory format so that the primitive is able to choose the most appropriate one.</li>
<li>The concat primitive is highly optimized for the cases in which all source tensors have same memory format and data type matches the destination tensor data type. For other cases, more general but slower code is working. Consider reordering sources to the same data format before using the concat primitive.</li>
</ol>
<h2>Examples</h2>
<table class="doxtable">
<tr>
<th align="left">Engine </th><th align="left">Name </th><th align="left">Comments  </th></tr>
<tr>
<td align="left">CPU/GPU </td><td align="left"><a class="el" href="concat_example_cpp.html">Concat Primitive Example</a> </td><td align="left"><p class="starttd">This C++ API example demonstrates how to create and execute a <a class="el" href="dev_guide_concat.html">Concat</a> primitive.</p>
<p class="endtd">Key optimizations included in this example:</p>
<ul>
<li>Identical source (src) memory formats.</li>
<li>Creation of optimized memory format for destination (dst) from the primitive descriptor </li>
</ul>
</td></tr>
</table>
</div></div><!-- contents -->
<div class="footer">
    <div class="footer-wrapper">
        <ul id="footer-links">
            <li><a href="legal_information.html">Legal information</a></li>
        </ul>
    </div>
</div>