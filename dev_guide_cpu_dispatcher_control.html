<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>oneDNN: CPU Dispatcher Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script src="assets/mathjax/MathJax.js?config=TeX-AMS_CHTML,dnnl"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
<link href="assets/customdoxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="assets/dnn.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname">oneAPI Deep Neural Network Library (oneDNN)
   &#160;<span id="projectnumber">1.5.0</span>
   </div>
   <div id="projectbrief">Performance library for Deep Learning</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CPU Dispatcher Control </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>oneDNN uses JIT code generation to implement most of its functionality and will choose the best code based on detected processor features. Sometimes it is necessary to control which features oneDNN detects. This is sometimes useful for debugging purposes or for performance exploration.</p>
<h2>Build-time Controls</h2>
<p>At build-time, support for this feature is controlled via cmake option <code>DNNL_ENABLE_JIT_PROFILING</code>.</p>
<table class="doxtable">
<tr>
<th align="left">CMake Option </th><th align="left">Supported values (defaults in bold) </th><th align="left">Description  </th></tr>
<tr>
<td align="left">DNNL_ENABLE_MAX_CPU_ISA </td><td align="left"><b>ON</b>, OFF </td><td align="left">Enables <a class="el" href="dev_guide_cpu_dispatcher_control.html">CPU dispatcher controls</a> </td></tr>
</table>
<h2>Run-time Controls</h2>
<p>When the feature is enabled at build-time, the <code>DNNL_MAX_CPU_ISA</code> environment variable can be used to limit processor features oneDNN is able to detect to certain Instruction Set Architecture (ISA) and older instruction sets.</p>
<table class="doxtable">
<tr>
<th align="left">Environment variable </th><th align="left">Value </th><th align="left">Description  </th></tr>
<tr>
<td align="left">DNNL_MAX_CPU_ISA </td><td align="left">SSE41 </td><td align="left">Intel Streaming SIMD Extensions 4.1 (Intel SSE4.1) </td></tr>
<tr>
<td align="left"></td><td align="left">AVX </td><td align="left">Intel Advanced Vector Extensions (Intel AVX) </td></tr>
<tr>
<td align="left"></td><td align="left">AVX2 </td><td align="left">Intel Advanced Vector Extensions 2 (Intel AVX2) </td></tr>
<tr>
<td align="left"></td><td align="left">AVX512_MIC </td><td align="left">Intel Advanced Vector Extensions 512 (Intel AVX-512) with AVX512CD, AVX512ER, and AVX512PF extensions </td></tr>
<tr>
<td align="left"></td><td align="left">AVX512_MIC_4OPS </td><td align="left">Intel AVX-512 with AVX512_4FMAPS and AVX512_4VNNIW extensions </td></tr>
<tr>
<td align="left"></td><td align="left">AVX512_CORE </td><td align="left">Intel AVX-512 with AVX512BW, AVX512VL, and AVX512DQ extensions </td></tr>
<tr>
<td align="left"></td><td align="left">AVX512_CORE_VNNI </td><td align="left">Intel AVX-512 with Intel Deep Learning Boost (Intel DL Boost) </td></tr>
<tr>
<td align="left"></td><td align="left">AVX512_CORE_BF16 </td><td align="left">Intel AVX-512 with Intel DL Boost and bfloat16 support </td></tr>
<tr>
<td align="left"></td><td align="left"><b>ALL</b> </td><td align="left"><b>No restrictions on ISA (default)</b> </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>The ISAs are partially ordered:<ul>
<li>SSE41 &lt; AVX &lt; AVX2,</li>
<li>AVX2 &lt; AVX512_MIC &lt; AVX512_MIC_4OPS,</li>
<li>AVX2 &lt; AVX512_CORE &lt; AVX512_CORE_VNNI &lt; AVX512_CORE_BF16.</li>
</ul>
</dd></dl>
<p>This feature can also be managed at run-time with the following functions:</p>
<ul>
<li><a class="el" href="group__dnnl__api__service.html#ga08734310b5f1ca794c64b6a5b944b698">dnnl::set_max_cpu_isa</a> function allows changing the ISA at run-time. The limitation is that, it is possible to set the value only before the first JIT-ed function is generated. This limitation ensures that the JIT-ed code observe consistent CPU features both during generation and execution.</li>
<li><a class="el" href="group__dnnl__api__service.html#ga3953f71c3f0126d9cc005a1ceff65e8b">dnnl::get_effective_cpu_isa</a> function returns the currently used CPU ISA which is the highest available CPU ISA by default.</li>
</ul>
<p>Function settings take precedence over environment variables. </p>
</div></div><!-- contents -->
<div class="footer">
    <div class="footer-wrapper">
        <ul id="footer-links">
            <li><a href="legal_information.html">Legal information</a></li>
        </ul>
    </div>
</div>