<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Intel(R) MKL-DNN: Memory</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script src="assets/mathjax/MathJax.js?config=TeX-AMS_CHTML"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
<link href="assets/customdoxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="assets/dnn.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname">Intel(R) Math Kernel Library for Deep Neural Networks (Intel(R) MKL-DNN)
   &#160;<span id="projectnumber">1.0.4</span>
   </div>
   <div id="projectbrief">Performance library for Deep Learning</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Memory<div class="ingroups"><a class="el" href="group__c__api__primitive.html">Primitive operations</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A primitive to describe and store data.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1c8e556a07a767a1b609ac6a52ba1ad0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#ga1c8e556a07a767a1b609ac6a52ba1ad0">mkldnn_memory_desc_init_by_strides</a> (<a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *memory_desc, int ndims, const <a class="el" href="group__c__api__types__memory.html#ga172d58716d5d4d104a05ed79a21dfec8">mkldnn_dims_t</a> dims, <a class="el" href="group__c__api__types__generic.html#ga826b2a9be4d94ac17f99bacac6d0cb29">mkldnn_data_type_t</a> data_type, const <a class="el" href="group__c__api__types__memory.html#ga172d58716d5d4d104a05ed79a21dfec8">mkldnn_dims_t</a> strides)</td></tr>
<tr class="memdesc:ga1c8e556a07a767a1b609ac6a52ba1ad0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a <code>memory_desc</code> memory descriptor using <code>ndims</code>, <code>dims</code>, <code>data_type</code>, and <code>strides</code>.  <a href="#ga1c8e556a07a767a1b609ac6a52ba1ad0">More...</a><br/></td></tr>
<tr class="separator:ga1c8e556a07a767a1b609ac6a52ba1ad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8895ff6e661d8fe1cdeae76e6e20bbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#gaa8895ff6e661d8fe1cdeae76e6e20bbc">mkldnn_memory_desc_init_by_tag</a> (<a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *memory_desc, int ndims, const <a class="el" href="group__c__api__types__memory.html#ga172d58716d5d4d104a05ed79a21dfec8">mkldnn_dims_t</a> dims, <a class="el" href="group__c__api__types__generic.html#ga826b2a9be4d94ac17f99bacac6d0cb29">mkldnn_data_type_t</a> data_type, <a class="el" href="group__c__api__types__generic.html#gacc2844e341ab1c4f5b7ae1c6068f2a2b">mkldnn_format_tag_t</a> tag)</td></tr>
<tr class="memdesc:gaa8895ff6e661d8fe1cdeae76e6e20bbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a <code>memory_desc</code> memory descriptor using <code>ndims</code>, <code>dims</code>, <code>data_type</code>, and format <code>tag</code>.  <a href="#gaa8895ff6e661d8fe1cdeae76e6e20bbc">More...</a><br/></td></tr>
<tr class="separator:gaa8895ff6e661d8fe1cdeae76e6e20bbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga65464ae3ae9131cb0e5163d9249e7d35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#ga65464ae3ae9131cb0e5163d9249e7d35">mkldnn_memory_desc_init_submemory</a> (<a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *memory_desc, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *parent_memory_desc, const <a class="el" href="group__c__api__types__memory.html#ga172d58716d5d4d104a05ed79a21dfec8">mkldnn_dims_t</a> dims, const <a class="el" href="group__c__api__types__memory.html#ga172d58716d5d4d104a05ed79a21dfec8">mkldnn_dims_t</a> offsets)</td></tr>
<tr class="memdesc:ga65464ae3ae9131cb0e5163d9249e7d35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a <code>memory_desc</code> for a given <code>parent_memory_desc</code>, with <code>dims</code> sizes and <code>offsets</code>.  <a href="#ga65464ae3ae9131cb0e5163d9249e7d35">More...</a><br/></td></tr>
<tr class="separator:ga65464ae3ae9131cb0e5163d9249e7d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadbe574936bc18227483b2ffe022bad63"><td class="memItemLeft" align="right" valign="top">int MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#gadbe574936bc18227483b2ffe022bad63">mkldnn_memory_desc_equal</a> (const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *lhs, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *rhs)</td></tr>
<tr class="memdesc:gadbe574936bc18227483b2ffe022bad63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares two memory descriptors.  <a href="#gadbe574936bc18227483b2ffe022bad63">More...</a><br/></td></tr>
<tr class="separator:gadbe574936bc18227483b2ffe022bad63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d4815fb696ab92600660040b4137958"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7d4815fb696ab92600660040b4137958"></a>
size_t MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#ga7d4815fb696ab92600660040b4137958">mkldnn_memory_desc_get_size</a> (const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *memory_desc)</td></tr>
<tr class="memdesc:ga7d4815fb696ab92600660040b4137958"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the size (in bytes) that is required for given <code>memory_desc</code>. <br/></td></tr>
<tr class="separator:ga7d4815fb696ab92600660040b4137958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16a5d3f01dd47973868ef49241a2d4ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#ga16a5d3f01dd47973868ef49241a2d4ef">mkldnn_memory_create</a> (<a class="el" href="group__c__api__types__memory.html#gacf7d7938936d5422bbd63ccb54efb336">mkldnn_memory_t</a> *memory, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *memory_desc, <a class="el" href="group__c__api__engine__types.html#ga40f5f917cdbf2215fa5324e4bf62d523">mkldnn_engine_t</a> engine, void *handle)</td></tr>
<tr class="memdesc:ga16a5d3f01dd47973868ef49241a2d4ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a memory for given <code>memory_desc</code> and <code>engine</code>.  <a href="#ga16a5d3f01dd47973868ef49241a2d4ef">More...</a><br/></td></tr>
<tr class="separator:ga16a5d3f01dd47973868ef49241a2d4ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b9649ef5812e7ab642aa506f02eafda"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3b9649ef5812e7ab642aa506f02eafda"></a>
<a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#ga3b9649ef5812e7ab642aa506f02eafda">mkldnn_memory_get_memory_desc</a> (<a class="el" href="group__c__api__types__memory.html#ga8bccb82071165d6eefef9d46ed802730">const_mkldnn_memory_t</a> memory, const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> **memory_desc)</td></tr>
<tr class="memdesc:ga3b9649ef5812e7ab642aa506f02eafda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a <code>memory_desc</code> associated with <code>memory</code>. <br/></td></tr>
<tr class="separator:ga3b9649ef5812e7ab642aa506f02eafda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6b50538dbdab8f767bb6f734403d79f2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6b50538dbdab8f767bb6f734403d79f2"></a>
<a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#ga6b50538dbdab8f767bb6f734403d79f2">mkldnn_memory_get_engine</a> (<a class="el" href="group__c__api__types__memory.html#ga8bccb82071165d6eefef9d46ed802730">const_mkldnn_memory_t</a> memory, <a class="el" href="group__c__api__engine__types.html#ga40f5f917cdbf2215fa5324e4bf62d523">mkldnn_engine_t</a> *engine)</td></tr>
<tr class="memdesc:ga6b50538dbdab8f767bb6f734403d79f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an <code>engine</code> associated with <code>memory</code>. <br/></td></tr>
<tr class="separator:ga6b50538dbdab8f767bb6f734403d79f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d4cae434757c698b00c340f00323382"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#ga1d4cae434757c698b00c340f00323382">mkldnn_memory_map_data</a> (<a class="el" href="group__c__api__types__memory.html#ga8bccb82071165d6eefef9d46ed802730">const_mkldnn_memory_t</a> memory, void **mapped_ptr)</td></tr>
<tr class="memdesc:ga1d4cae434757c698b00c340f00323382"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a <code>memory</code>, maps the data of the memory to <code>mapped_ptr</code>.  <a href="#ga1d4cae434757c698b00c340f00323382">More...</a><br/></td></tr>
<tr class="separator:ga1d4cae434757c698b00c340f00323382"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac61b4fdaad4d6af2e1ea4e0d30ef29cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#gac61b4fdaad4d6af2e1ea4e0d30ef29cb">mkldnn_memory_unmap_data</a> (<a class="el" href="group__c__api__types__memory.html#ga8bccb82071165d6eefef9d46ed802730">const_mkldnn_memory_t</a> memory, void *mapped_ptr)</td></tr>
<tr class="memdesc:gac61b4fdaad4d6af2e1ea4e0d30ef29cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a <code>memory</code>, unmaps a mapped pointer to the data of the memory.  <a href="#gac61b4fdaad4d6af2e1ea4e0d30ef29cb">More...</a><br/></td></tr>
<tr class="separator:gac61b4fdaad4d6af2e1ea4e0d30ef29cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga569c83ad7ecf0d0c037e41eb7e4a3da7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#ga569c83ad7ecf0d0c037e41eb7e4a3da7">mkldnn_memory_get_data_handle</a> (<a class="el" href="group__c__api__types__memory.html#ga8bccb82071165d6eefef9d46ed802730">const_mkldnn_memory_t</a> memory, void **handle)</td></tr>
<tr class="memdesc:ga569c83ad7ecf0d0c037e41eb7e4a3da7"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a <code>memory</code>, returns the data <code>handle</code>.  <a href="#ga569c83ad7ecf0d0c037e41eb7e4a3da7">More...</a><br/></td></tr>
<tr class="separator:ga569c83ad7ecf0d0c037e41eb7e4a3da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga759fb1b03264d81b93803b9b56588a54"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga759fb1b03264d81b93803b9b56588a54"></a>
<a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#ga759fb1b03264d81b93803b9b56588a54">mkldnn_memory_set_data_handle</a> (<a class="el" href="group__c__api__types__memory.html#gacf7d7938936d5422bbd63ccb54efb336">mkldnn_memory_t</a> memory, void *handle)</td></tr>
<tr class="memdesc:ga759fb1b03264d81b93803b9b56588a54"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a <code>memory</code>, sets the data <code>handle</code>. <br/></td></tr>
<tr class="separator:ga759fb1b03264d81b93803b9b56588a54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga505acdd7d07d543098fef63261f57c30"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga505acdd7d07d543098fef63261f57c30"></a>
<a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__c__api__memory.html#ga505acdd7d07d543098fef63261f57c30">mkldnn_memory_destroy</a> (<a class="el" href="group__c__api__types__memory.html#gacf7d7938936d5422bbd63ccb54efb336">mkldnn_memory_t</a> memory)</td></tr>
<tr class="memdesc:ga505acdd7d07d543098fef63261f57c30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a <code>memory</code>. <br/></td></tr>
<tr class="separator:ga505acdd7d07d543098fef63261f57c30"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A primitive to describe and store data. </p>
<p>The library supports various data types and formats. Memory hierarchy consists of three levels of abstraction:</p>
<ol type="1">
<li><b>Memory descriptor</b> &ndash; engine agnostic logical description of data (number of dimensions, dimensions themselves, and data type), and optionally the format/layout that describes the physical representation of data in memory. If the format is not known yet, one can pass <a class="el" href="group__c__api__types__generic.html#ggacc2844e341ab1c4f5b7ae1c6068f2a2bab7f14a435b0c6373badb9b3f296e6c1f" title="Undefined memory format tag. ">mkldnn_format_tag_any</a>. This approach is used to allow compute-intensive primitives to specify the most appropriate format on their own with users required to reorder the data if the incoming format doesn't match the primitive's selection. Memory descriptor can be initialized with <a class="el" href="group__c__api__memory.html#gaa8895ff6e661d8fe1cdeae76e6e20bbc" title="Initializes a memory_desc memory descriptor using ndims, dims, data_type, and format tag...">mkldnn_memory_desc_init_by_tag()</a> or <a class="el" href="group__c__api__memory.html#ga1c8e556a07a767a1b609ac6a52ba1ad0" title="Initializes a memory_desc memory descriptor using ndims, dims, data_type, and strides. ">mkldnn_memory_desc_init_by_strides()</a> functions, or by directly filling the <a class="el" href="structmkldnn__memory__desc__t.html" title="Memory descriptor. ">mkldnn_memory_desc_t</a> structure. The latter requires deep knowledge of how the physical data representation is mapped to the structure. The <a class="el" href="dev_guide_understanding_memory_formats.html">Understanding Memory Formats</a> topic should shed some light on that. For the fully defined memory descriptors (i.e. where the format kind is not equal to <a class="el" href="group__c__api__types__generic.html#gga1f6c390306d4c8a438c0efbff08c0539a25ba80bb864a69c9fae70b4503e76167" title="Unspecified format kind. ">mkldnn_format_kind_any</a>) a user can the size, using the <a class="el" href="group__c__api__memory.html#ga7d4815fb696ab92600660040b4137958" title="Returns the size (in bytes) that is required for given memory_desc. ">mkldnn_memory_desc_get_size()</a> function. As described in <a class="el" href="dev_guide_understanding_memory_formats.html">Understanding Memory Formats</a>, the size of data sometimes cannot be computed as the product of dimensions times the size of the data type. So users are encouraged to use this function for better code portability. Two memory descriptors can be compared with <a class="el" href="group__c__api__memory.html#gadbe574936bc18227483b2ffe022bad63" title="Compares two memory descriptors. ">mkldnn_memory_desc_equal()</a>. The comparison is especially useful when checking whether a primitive requires reorder from the user's data format to the primitive's format.</li>
<li><b>Memory</b> &ndash; an engine-specific object that handles the data and its description (a memory descriptor). For CPU enigne, the data handle is simply a pointer to <code>void</code>. The data handle can be queried using <a class="el" href="group__c__api__memory.html#ga569c83ad7ecf0d0c037e41eb7e4a3da7" title="For a memory, returns the data handle. ">mkldnn_memory_get_data_handle()</a> and set using <a class="el" href="group__c__api__memory.html#ga759fb1b03264d81b93803b9b56588a54" title="For a memory, sets the data handle. ">mkldnn_memory_set_data_handle()</a>. The latter function always sets the memory in the padding region to zero, which is the invariant maintained by all the primitives in Intel MKL-DNN. See <a class="el" href="dev_guide_understanding_memory_formats.html">Understanding Memory Formats</a> for more details. A memory can be created using <a class="el" href="group__c__api__memory.html#ga16a5d3f01dd47973868ef49241a2d4ef" title="Creates a memory for given memory_desc and engine. ">mkldnn_memory_create()</a> function. A memory can also be queried for the underlying memory descriptor and engine using <a class="el" href="group__c__api__memory.html#ga3b9649ef5812e7ab642aa506f02eafda" title="Returns a memory_desc associated with memory. ">mkldnn_memory_get_memory_desc()</a> and <a class="el" href="group__c__api__memory.html#ga6b50538dbdab8f767bb6f734403d79f2" title="Returns an engine associated with memory. ">mkldnn_memory_get_engine()</a> functions.</li>
</ol>
<p>Along with ordinary memory with all dimensions being positive, Intel MKL-DNN supports <em>zero-volume</em> memory with one or more dimensions set to zero. This is to support the NumPy* convention. If a <em>zero-volume</em> memory is passed to a primitive, the primitive does not perform any computations on this memory. For example:</p>
<ul>
<li>Convolution with <code>(0 batch, 3 input channels, 13 height, 13 width)</code> source and <code>(16 output channels, 3 inputs, channel, 3 height, 3 width)</code> weights would produce <code>(0 batch, 16 output channels, 11 height, 11 width)</code> destination (assuming strides are <code>1</code> and paddings are zero) and perform zero multiply-add operations.</li>
<li>Concatenation of three memories of shapes <code>(3, 4, 13, 13)</code>, <code>(3, 0, 13, 13)</code>, and <code>(3, 1, 13, 13)</code> along the second axis would produce the output of the shape <code>(3, 5, 13, 13)</code>, effectively ignoring the second input (however, if the user created a concatenation primitive descriptor with three inputs they should also provide all three memories to the concatenation primitive, including the one with zero second dimension).</li>
<li>However, Intel MKL-DNN would return an error when attempting to create a convolution with <em>zero-volume</em> memory passed for weights because such a convolution is not well-defined: <div class="fragment"><div class="line">dst(1, 16, 11, 11) &lt;-- src(1, 0, 13, 13) (*) wei(16, 0, 3, 3)</div>
</div><!-- fragment --> Should the values in the destination be zeroes or just not accessed at all? Moreover, backward pass w.r.t. weights in such cases is also not well-defined.</li>
</ul>
<p>Data handle of <em>zero-volume</em> memory is never accessed and hence can be unset (NULL in case of CPU engine).</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="dev_guide_understanding_memory_formats.html">Understanding Memory Formats</a> </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga1c8e556a07a767a1b609ac6a52ba1ad0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API mkldnn_memory_desc_init_by_strides </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *&#160;</td>
          <td class="paramname"><em>memory_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ndims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__c__api__types__memory.html#ga172d58716d5d4d104a05ed79a21dfec8">mkldnn_dims_t</a>&#160;</td>
          <td class="paramname"><em>dims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__api__types__generic.html#ga826b2a9be4d94ac17f99bacac6d0cb29">mkldnn_data_type_t</a>&#160;</td>
          <td class="paramname"><em>data_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__c__api__types__memory.html#ga172d58716d5d4d104a05ed79a21dfec8">mkldnn_dims_t</a>&#160;</td>
          <td class="paramname"><em>strides</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a <code>memory_desc</code> memory descriptor using <code>ndims</code>, <code>dims</code>, <code>data_type</code>, and <code>strides</code>. </p>
<p>The <code>strides</code> might be NULL, which means the order of physical dimensions is the same as the order of logical ones.</p>
<dl class="section note"><dt>Note</dt><dd>The logical order of dimensions is defined by a primitive that consumes the memory. </dd></dl>

</div>
</div>
<a class="anchor" id="gaa8895ff6e661d8fe1cdeae76e6e20bbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API mkldnn_memory_desc_init_by_tag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *&#160;</td>
          <td class="paramname"><em>memory_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ndims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__c__api__types__memory.html#ga172d58716d5d4d104a05ed79a21dfec8">mkldnn_dims_t</a>&#160;</td>
          <td class="paramname"><em>dims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__api__types__generic.html#ga826b2a9be4d94ac17f99bacac6d0cb29">mkldnn_data_type_t</a>&#160;</td>
          <td class="paramname"><em>data_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__api__types__generic.html#gacc2844e341ab1c4f5b7ae1c6068f2a2b">mkldnn_format_tag_t</a>&#160;</td>
          <td class="paramname"><em>tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a <code>memory_desc</code> memory descriptor using <code>ndims</code>, <code>dims</code>, <code>data_type</code>, and format <code>tag</code>. </p>
<p><code>tag</code> can be <a class="el" href="group__c__api__types__generic.html#ggacc2844e341ab1c4f5b7ae1c6068f2a2bab7f14a435b0c6373badb9b3f296e6c1f" title="Undefined memory format tag. ">mkldnn_format_tag_any</a>, which allows a primitive to define the appropriate memory format. In this case, the <code>format_kind</code> would be set to <a class="el" href="group__c__api__types__generic.html#gga1f6c390306d4c8a438c0efbff08c0539a25ba80bb864a69c9fae70b4503e76167" title="Unspecified format kind. ">mkldnn_format_kind_any</a> </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="cpu_cnn_inference_f32_8c-example.html#a7">cpu_cnn_inference_f32.c</a>, <a class="el" href="cpu_cnn_training_f32_8c-example.html#a6">cpu_cnn_training_f32.c</a>, and <a class="el" href="gpu_getting_started_8c-example.html#a8">gpu_getting_started.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga65464ae3ae9131cb0e5163d9249e7d35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API mkldnn_memory_desc_init_submemory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *&#160;</td>
          <td class="paramname"><em>memory_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *&#160;</td>
          <td class="paramname"><em>parent_memory_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__c__api__types__memory.html#ga172d58716d5d4d104a05ed79a21dfec8">mkldnn_dims_t</a>&#160;</td>
          <td class="paramname"><em>dims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__c__api__types__memory.html#ga172d58716d5d4d104a05ed79a21dfec8">mkldnn_dims_t</a>&#160;</td>
          <td class="paramname"><em>offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a <code>memory_desc</code> for a given <code>parent_memory_desc</code>, with <code>dims</code> sizes and <code>offsets</code>. </p>
<p>May fail if layout used does not allow obtain desired submemory. In this case consider using <code>extract</code> or <code>insert</code> primitive </p>

</div>
</div>
<a class="anchor" id="gadbe574936bc18227483b2ffe022bad63"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKLDNN_API mkldnn_memory_desc_equal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *&#160;</td>
          <td class="paramname"><em>lhs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *&#160;</td>
          <td class="paramname"><em>rhs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compares two memory descriptors. </p>
<dl class="section return"><dt>Returns</dt><dd>1 if the descriptors are the same. </dd>
<dd>
0 if the descriptors are different.</dd></dl>
<p>Use this function to identify whether a reorder is required between the two memories </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="cpu_cnn_inference_f32_8c-example.html#a12">cpu_cnn_inference_f32.c</a>, and <a class="el" href="cpu_cnn_training_f32_8c-example.html#a12">cpu_cnn_training_f32.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga16a5d3f01dd47973868ef49241a2d4ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API mkldnn_memory_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c__api__types__memory.html#gacf7d7938936d5422bbd63ccb54efb336">mkldnn_memory_t</a> *&#160;</td>
          <td class="paramname"><em>memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmkldnn__memory__desc__t.html">mkldnn_memory_desc_t</a> *&#160;</td>
          <td class="paramname"><em>memory_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__c__api__engine__types.html#ga40f5f917cdbf2215fa5324e4bf62d523">mkldnn_engine_t</a>&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a memory for given <code>memory_desc</code> and <code>engine</code>. </p>
<p>Also sets <code>handle</code> to one of the following:</p>
<ul>
<li>pointer to the user allocated memory, i.e. valid handle. In this case the library doesn't own allocated memory.</li>
<li>MKLDNN_MEMORY_ALLOCATE to ask the library to allocate and attach memory. In this case the library owns allocated memory.</li>
<li>MKLDNN_MEMORY_NONE to create <a class="el" href="structmkldnn__memory.html" title="An opaque structure to describe a memory. ">mkldnn_memory</a> w/o attached memory. </li>
</ul>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="cpu_cnn_inference_f32_8c-example.html#a8">cpu_cnn_inference_f32.c</a>, <a class="el" href="cpu_cnn_training_f32_8c-example.html#a8">cpu_cnn_training_f32.c</a>, and <a class="el" href="gpu_getting_started_8c-example.html#a11">gpu_getting_started.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga1d4cae434757c698b00c340f00323382"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API mkldnn_memory_map_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c__api__types__memory.html#ga8bccb82071165d6eefef9d46ed802730">const_mkldnn_memory_t</a>&#160;</td>
          <td class="paramname"><em>memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>mapped_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For a <code>memory</code>, maps the data of the memory to <code>mapped_ptr</code>. </p>
<p>Mapping allows to read/write directly from/to the memory contents for engines that do not support direct memory access.</p>
<p>Mapping is an exclusive operation - a memory object cannot be used in other operations until this memory object is unmapped.</p>
<dl class="section note"><dt>Note</dt><dd>Any primitives working with <code>memory</code> should be completed before mapping the memory. Use mkldnn_stream_wait to synchronize the corresponding execution stream.</dd>
<dd>
Map/unmap API is provided mainly for debug/testing purposes and its performance may be suboptimal. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="gpu_getting_started_8c-example.html#a1">gpu_getting_started.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gac61b4fdaad4d6af2e1ea4e0d30ef29cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API mkldnn_memory_unmap_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c__api__types__memory.html#ga8bccb82071165d6eefef9d46ed802730">const_mkldnn_memory_t</a>&#160;</td>
          <td class="paramname"><em>memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>mapped_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For a <code>memory</code>, unmaps a mapped pointer to the data of the memory. </p>
<p>Any changes of the mapped data are synchronized back to the memory after the call is complete. The mapped pointer must be obtained through a mkldnn_memory_map_data call.</p>
<dl class="section note"><dt>Note</dt><dd>Map/unmap API is provided mainly for debug/testing purposes and its performance may be suboptimal. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="gpu_getting_started_8c-example.html#a2">gpu_getting_started.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga569c83ad7ecf0d0c037e41eb7e4a3da7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c__api__types__generic.html#ga31866789b66acfb1c28b2f9bdd7bdfdd">mkldnn_status_t</a> MKLDNN_API mkldnn_memory_get_data_handle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__c__api__types__memory.html#ga8bccb82071165d6eefef9d46ed802730">const_mkldnn_memory_t</a>&#160;</td>
          <td class="paramname"><em>memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For a <code>memory</code>, returns the data <code>handle</code>. </p>
<p>For the CPU engine, the data handle is a pointer to the actual data. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="cpu_cnn_training_f32_8c-example.html#a55">cpu_cnn_training_f32.c</a>.</dd>
</dl>
</div>
</div>
</div><!-- contents -->
<div class="footer">
    <div class="footer-wrapper">
        <ul id="footer-links">
            <li><a href="legal_information.html">Legal information</a></li>
        </ul>
    </div>
</div>